<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ayrd & Bloom</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="styles.css">
  </head>

  <body>
    <!-- ÚNICO div#app para Vue -->
    <div id="app">

      <!-- NAVBAR -->
      <nav class="navbar">
        <div class="navbar-container">
          <div class="navbar-content">

            <!-- Logo -->
            <div class="navbar-logo" @click.prevent="vista='inicio'">
              <div class="logo-image-wrapper">
                <img src="https://lh3.googleusercontent.com/aida-public/AB6AXuBgfUcSPlH9P5t3WUaOhC-lllCJfq--WSsM1ulKkuWm2KWnPsCd5MrQjS4kMoG0e0_-UN4O1UKTc7WEf4ZrimPdkloe9VUP2NiTE3AN4J0R8HNDTWo4FhXUzjF25j1QrhhivtI0r2N5HhWIFnC3D33Fg7PhYcdfW9zT4ut-IOMK7YJATajAEHPaFAX_IPXFbduOBjTsWTKMb1tx4IYulMl3jK0HCaJg5oXoFO7jzBWk93l71jUD4aII3IDoswjVUw-ymcL1C-CRKw"
                    alt="Ayrd & Bloom Logo" class="logo-image">
              </div>
              <div class="logo-text">
                <span class="logo-title">Ayrd & Bloom</span>
                <span class="logo-subtitle">Beauty & Wellness</span>
              </div>
            </div>

            <!-- Menu Desktop -->
            <div class="navbar-menu">
              <a href="#" class="menu-link" @click.prevent="vista='inicio'">Inicio</a>

              <div class="menu-dropdown">
                <button class="menu-link dropdown-toggle" @click.prevent="vista='productos'">
                  Productos
                  <span class="material-icons-outlined dropdown-icon">expand_more</span>
                </button>

                <div class="dropdown-content">
                  <a href="#" class="dropdown-item"
                    v-for="p in productos" :key="p.id"
                    @click.prevent="verProducto(p.id)">
                    {{ p.nombre }}
                  </a>
                </div>
              </div>

              <a href="#" class="menu-link" @click.prevent="vista='acerca'">Acerca de</a>
              <a href="#" class="menu-link" @click.prevent="vista='login'">Registrarse / Iniciar sesión</a>

              <!-- Carrito -->
              <a href="#" class="nav-icon-link cart-link" @click.prevent="vista='carrito'">
                <span class="material-icons-outlined">shopping_bag</span>
                <span class="cart-badge">{{ totalUnidadesCarrito }}</span>
              </a>

              <!-- Idioma -->
              <div class="language-switcher" @click="toggleIdioma">
                <span class="lang-active">{{ idiomaActual.toUpperCase() }}</span>
                <span class="lang-separator">|</span>
                <span class="lang-inactive">
                  {{ idiomaActual === 'es' ? 'EN' : 'ES' }}
                </span>
              </div>
            </div>

            <!-- Actions -->
            <div class="navbar-actions">
              <!-- Dark Mode Toggle -->
              <button class="theme-toggle" id="themeToggle">
                <span class="material-icons-outlined light-icon">dark_mode</span>
                <span class="material-icons-outlined dark-icon">light_mode</span>
              </button>
            </div>

          </div>
        </div>
      </nav>

      <!-- Menú lateral (Bootstrap) -->
      <div class="offcanvas offcanvas-end" tabindex="-1" id="menuLateral">
        <div class="offcanvas-header">
          <h5 class="offcanvas-title">Menú</h5>
          <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>

        <div class="offcanvas-body">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#" @click.prevent="vista='inicio'">Inicio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" @click.prevent="vista='productos'">Productos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" @click.prevent="vista='acerca'">Acerca de</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" @click.prevent="vista='login'">Registrarse / Iniciar sesión</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#" @click.prevent="vista='carrito'">Carrito</a>
            </li>
          </ul>
        </div>
      </div>

      <!-- CARRUSEL (fuera de Vue, solo HTML estático) -->
      <section class="container">
        <div class="carrusel">
          <div class="carrusel-track">
            <!-- Clon de la última -->
            <div class="slide">
              <img src="img/carrusel/foto_carrusel_5.jpeg" alt="Esencia Pura">
            </div>

            <!-- Slides principales -->
            <div class="slide">
              <img src="img/carrusel/ft_carrusel_1.png" alt="Natural Radiance">
            </div>
            <div class="slide">
              <img src="img/carrusel/foto_carrusel_2.webp" alt="Calma Interior">
            </div>
            <div class="slide">
              <img src="img/carrusel/ft_carrousel_3.png" alt="Oro Regenerador">
            </div>
            <div class="slide">
              <img src="img/carrusel/foto_carrusel_4.png" alt="Belleza Natural">
            </div>
            <div class="slide">
              <img src="img/carrusel/foto_carrusel_5.jpeg" alt="Esencia Pura">
            </div>

            <!-- Clon de la primera -->
            <div class="slide">
              <img src="img/carrusel/ft_carrusel_1.png" alt="Natural Radiance">
            </div>
          </div>
        </div>
      </section>

      <!-- CONTENIDO PRINCIPAL (Vue) -->
      <main class="container">

        <!-- INICIO -->
        <section v-if="vista === 'inicio'">
          <h2>Recomendado</h2>
          <div v-if="recomendado">
            <h3>{{ recomendado.nombre }}</h3>
            <img :src="recomendado.imagen" style="max-width:200px">
            <p>{{ recomendado.descripcion }}</p>
            <p><strong>{{ recomendado.precio }} €</strong></p>
            <button @click="addCarrito(recomendado)">Añadir al carrito</button>
          </div>
        </section>

        <!-- PRODUCTOS -->
        <section v-if="vista === 'productos'">
          <h2>Productos</h2>
          <ul>
            <li v-for="p in productos" :key="p.id"
                @click="verProducto(p.id)"
                :class="{ 'sin-stock': p.disponibilidad == 0 }">
              {{ p.nombre }} - {{ p.precio }} €
            </li>
          </ul>
        </section>

        <!-- DETALLE -->
        <section v-if="vista === 'detalle' && producto">
          <h2>{{ producto.nombre }}</h2>
          <img :src="producto.imagen" style="max-width:250px">
          <p>{{ producto.descripcion }}</p>
          <p><strong>{{ producto.precio }} €</strong></p>
          <button @click="addCarrito(producto)">Añadir al carrito</button>
        </section>

        <!-- ACERCA -->
        <section v-if="vista === 'acerca'">
          <h2>Acerca de la compañía</h2>
          <p>Texto sobre la empresa...</p>
        </section>

        <!-- CARRITO -->
        <section v-if="vista === 'carrito'">
          <h2>Carrito</h2>
          <div v-if="carrito.length === 0">Carrito vacío</div>

          <ul v-else>
            <li v-for="item in carrito" :key="item.id">
              {{ item.nombre }} x {{ item.cantidad }} — {{ item.precio }} €
              <button @click="removeCarrito(item.id)">Eliminar</button>

            </li>
          </ul>

          <p><strong>Total: {{ total }} €</strong></p>

          <button v-if="carrito.length" @click="confirmarPedido">Confirmar pedido</button>
          <button v-if="carrito.length" @click="cancelarPedido">Cancelar pedido</button>
        </section>


        <!-- LOGIN / REGISTRO -->
        <section v-if="vista === 'login'" class="registro-section">
          <div class="registro-container">
            <h2 class="registro-title">Registro</h2>

            <!-- Usuario logueado -->
            <div v-if="usuario" class="user-logged-alert">
              <strong>¡Bienvenido de nuevo!</strong>
              <p class="user-info">{{ usuario.nombre }}<br>{{ usuario.email }}</p>
              <button class="btn-logout" @click="cerrarSesion">
                <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px;">logout</span>
                Cerrar sesión
              </button>
            </div>

            <!-- Formulario de Registro -->
            <form v-else @submit.prevent="registrar" class="registro-form">
              <!-- Decoraciones -->
              <div class="form-decoration form-decoration-1"></div>
              <div class="form-decoration form-decoration-2"></div>

              <!-- Nombre -->
              <div class="form-group">
                <label class="form-label">
                  <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px; font-size: 1.2rem;">person</span>
                  Nombre completo
                </label>
                <input 
                  class="form-input" 
                  v-model="form.nombre"
                  type="text"
                  placeholder="Ej: María García López"
                  pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]{3,40}$" 
                  required>
                <small class="form-help-text">Entre 3 y 40 caracteres</small>
              </div>

              <!-- Email -->
              <div class="form-group">
                <label class="form-label">
                  <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px; font-size: 1.2rem;">email</span>
                  Correo electrónico
                </label>
                <input 
                  class="form-input" 
                  v-model="form.email"
                  type="email"
                  placeholder="tu.email@ejemplo.com"
                  pattern="^[\w.-]+@[\w.-]+\.[A-Za-z]{2,}$" 
                  required>
                <small class="form-help-text">Introduce un email válido</small>
              </div>

              <!-- Teléfono -->
              <div class="form-group">
                <label class="form-label">
                  <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px; font-size: 1.2rem;">phone</span>
                  Teléfono
                </label>
                <input 
                  class="form-input" 
                  v-model="form.telefono"
                  type="tel"
                  placeholder="612345678"
                  pattern="^[0-9]{9}$" 
                  required>
                <small class="form-help-text">9 dígitos sin espacios</small>
              </div>

              <!-- Dirección -->
              <div class="form-group">
                <label class="form-label">
                  <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px; font-size: 1.2rem;">home</span>
                  Dirección
                </label>
                <input 
                  class="form-input" 
                  v-model="form.direccion"
                  type="text"
                  placeholder="Calle Principal, 123, 1ºA"
                  pattern="^[A-Za-z0-9ÁÉÍÓÚáéíóúÑñ\s,.-]{5,100}$" 
                  required>
                <small class="form-help-text">Dirección completa de envío</small>
              </div>

              <!-- Ciudad -->
              <div class="form-group">
                <label class="form-label">
                  <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px; font-size: 1.2rem;">location_city</span>
                  Ciudad
                </label>
                <input 
                  class="form-input" 
                  v-model="form.ciudad"
                  type="text"
                  placeholder="Madrid"
                  pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ\s]{3,40}$" 
                  required>
                <small class="form-help-text">Ciudad de residencia</small>
              </div>

              <!-- Cuenta bancaria -->
              <div class="form-group">
                <label class="form-label">
                  <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 5px; font-size: 1.2rem;">account_balance</span>
                  Cuenta bancaria (IBAN)
                </label>
                <input 
                  class="form-input" 
                  v-model="form.cuenta"
                  type="text"
                  placeholder="ES1234567890123456789012"
                  pattern="^ES[0-9]{22}$" 
                  required>
                <small class="form-help-text">IBAN español (ES + 22 dígitos)</small>
              </div>

              <!-- Botón Submit -->
              <button type="submit" class="btn-submit">
                <span class="material-icons-outlined" style="vertical-align: middle; margin-right: 8px;">person_add</span>
                Crear cuenta
              </button>
            </form>
          </div>
        </section>

      </main>
      <!-- OTRA INFORMACIÓN: Otros productos -->
      <div class="container mt-4">
        <h3>Otros productos</h3>
        <ul>
          <li v-for="p in productos.slice(1)" :key="p.id"
              @click="verProducto(p.id)"
              :class="{ 'sin-stock': p.disponibilidad == 0 }">
            {{ p.nombre }} - {{ p.precio }} €
          </li>
        </ul>
      </div>

      <!-- FOOTER -->
      <footer class="footer">
        <div class="footer-overlay"></div>
        <div class="footer-container">
          <div class="footer-grid">
            <!-- Columna 1 -->
            <div class="footer-column">
              <h3 class="footer-brand">Ayrd & Bloom</h3>
              <p class="footer-description">
                Belleza consciente que nutre tu piel y tu espíritu.
              </p>
              <div class="footer-social">
                <a href="#" class="social-link" aria-label="Facebook">
                  <span class="material-icons-outlined">facebook</span>
                </a>
                <a href="#" class="social-link" aria-label="Instagram">
                  <span class="material-icons-outlined">camera_alt</span>
                </a>
                <a href="#" class="social-link" aria-label="Email">
                  <span class="material-icons-outlined">alternate_email</span>
                </a>
              </div>
            </div>

            <!-- Columna 2 -->
            <div class="footer-column">
              <h4 class="footer-title">Explorar</h4>
              <ul class="footer-links">
                <li><a href="#" class="footer-link">Nuestra Historia</a></li>
                <li><a href="#" class="footer-link">Ingredientes</a></li>
                <li><a href="#" class="footer-link">Blog de Bienestar</a></li>
                <li><a href="#" class="footer-link">Programa de Lealtad</a></li>
              </ul>
            </div>

            <!-- Columna 3 -->
            <div class="footer-column">
              <h4 class="footer-title">Ayuda</h4>
              <ul class="footer-links">
                <li><a href="#" class="footer-link">Envíos y Devoluciones</a></li>
                <li><a href="#" class="footer-link">Preguntas Frecuentes</a></li>
                <li><a href="#" class="footer-link">Contacto</a></li>
                <li><a href="#" class="footer-link">Términos y Condiciones</a></li>
              </ul>
            </div>

            <!-- Columna 4 -->
            <div class="footer-column">
              <h4 class="footer-title">Contacto</h4>
              <ul class="footer-contact">
                <li class="contact-item">
                  <span class="material-icons-outlined contact-icon">location_on</span>
                  <span class="contact-text">Calle Principal 123,<br/>Ciudad Jardín, CP 28001</span>
                </li>
                <li class="contact-item">
                  <span class="material-icons-outlined contact-icon">email</span>
                  <span class="contact-text">hola@ayrdbloom.com</span>
                </li>
                <li class="contact-item">
                  <span class="material-icons-outlined contact-icon">phone</span>
                  <span class="contact-text">+34 912 345 678</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Copyright -->
          <div class="footer-bottom">
            <p class="footer-copyright">
              © 2023 Ayrd & Bloom. Todos los derechos reservados.
            </p>
          </div>
        </div>
      </footer>

    </div><!-- Fin #app -->

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Vue PRIMERO -->
    <script src="https://unpkg.com/vue@3"></script>
    <!-- Luego app.js (Vue) -->
    <script src="app.js"></script>
    <!-- Por último script.js (Carrusel y Footer) -->
    <script src="script.js"></script>
  </body>
</html>

